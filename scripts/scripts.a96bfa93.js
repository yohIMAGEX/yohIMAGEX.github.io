"use strict";function appConfig(a,b){var c={templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main",resolve:{yearsData:["fraserData","$q",function(a,b){var c=b.defer();return a.getData().then(function(a){c.resolve(a)},function(){c.reject("data not found")}),c.promise}]}};a.when("/",c).when("/:catchAll*",c),b.html5Mode({enabled:!0,requireBase:!1})}function mainController(a,b){var c=this;c.yearsData=a,"dataset"==b.search().page||"graph"==b.search().page?c.page=b.search().page:c.page="map"}function mapDirectiveController(a,c,d){function e(){C=d3.geomap.choropleth().geofile("vendors/d3-geomap/topojson/world/countries.json").height(v).width($("#graph").width()).projection(d3.geo.mercator).colors(_.map(s.colorRange,"color")).column("summary_index").duration(!1).zoomFactor(2).domain([0,10]).unitId("iso_code").format(d3.format(",.02f")).legend(!1).onGeofileLoad(function(a){h(),g(),q()}).onClick(function(a){a&&(o(),p(),B.value(C._.zoomBehavior.scale()),$("#typeahead").select2("close"))}).postUpdate(f),D=d3.keys(s.yearsData);var a=D[D.length-1];s.slider.value=D.length,s.slider.dataValues=D,d3.select("#graph").datum(s.yearsData[a]).call(C.draw,C),x=s.yearsData[a]}function f(){l(),p(),n(),a.$apply()}function g(){d3.selectAll(".unit").on("mouseover",function(b){u=d3.select(".tooltip-map"),y=b.data,s.tooltipCountry={name:b.properties.name,rank:y?"#"+b.data.ranking:"N/A",color:y?b.data.color:"#000",flagClass:"flag-"+b.id.toLowerCase(),score:y?parseFloat(y[C.column()],10).toFixed(2):"N/A"},u.classed("hidden",!1),a.$apply()}).on("mousemove",function(){var b=d3.event,c=b.pageX-50,d=b.pageY-(u.node().getBoundingClientRect().height+15);u.classed("hidden",!1).attr("style","left:"+c+"px; top:"+d+"px"),a.$apply()}).on("mouseout",function(){u.classed("hidden",!0),y=null,s.tooltipCountry=null})}function h(){var a=$("#typeahead");d.getItems().then(function(b){function c(a,b){var c=a.toUpperCase().indexOf(b.toUpperCase()),d=$("<span></span>");if(0>c)return d.text(a);d.text(a.substring(0,c));var e=$('<span class="select2-rendered__match"></span>');return e.text(a.substring(c,c+b.length)),d.append(e),d.append(a.substring(c+b.length)),d}var d=(_.forEach(b,function(b){a.append($("<option>",b))}),{});E=a.select2({dropdownParent:$(".header-controls"),dropdownCssClass:"map-typeahed--dropdown",templateResult:function(a){if(a.loading)return a.text;var b=d.term||"",e=c(a.text,b);return e},maximumSelectionLength:5}),a.on("select2:unselect",function(a){a&&a.params&&a.params.data&&a.params.data.id&&i(a.params.data.id)}),a.on("select2:select",function(a){a&&a.params&&a.params.data&&a.params.data.id&&i(a.params.data.id)}),a.on("change",function(b,c){a.val()||[]})})}function i(a){var b=_.find(d3.selectAll(".unit").data(),{id:a});b&&C.clicked(b)}function j(){var a=parseInt(this.getAttribute("data-zoom"));b=(d3.event.target,1),d3.event.preventDefault(),b=C._.zoomBehavior.scale()+1*a,k(b)}function k(a){var b=[C.properties.width/2,C.properties.height/2],c=C._.zoomBehavior.scaleExtent(),d=C._.zoomBehavior.translate(),e=[],f=[],g={x:d[0],y:d[1],k:C._.zoomBehavior.scale()};return a<c[0]||a>c[1]?!1:(e=[(b[0]-g.x)/g.k,(b[1]-g.y)/g.k],g.k=a,f=[e[0]*g.k+g.x,e[1]*g.k+g.y],g.x+=b[0]-f[0],g.y+=b[1]-f[1],C._.zoomBehavior.scale(g.k),B.value(g.k),C._.zoomBehavior.translate([g.x,g.y]),C.zoom(),void 0)}function l(){s.tableData={mostFree:[],quartile2:[],quartile3:[],leastFree:[]};var a=d3.selectAll(".unit").data(),b=t-1,c=[],d=null,e=null,f=null,g=null,h=0,i="";b>=0&&(c=s.yearsData[D[b]]),a=a.filter(function(a){return a.data?!0:!1}),a.sort(function(a,b){return a.data.ranking-b.data.ranking});for(var j=0;j<a.length;j++)if(d=a[j].data,f=_.find(c,{iso_code:d.iso_code}),f&&(h=d[C.column()]-f[C.column()],0>h?i="fa-arrow-down":h>0&&(i="fa-arrow-up"),d.arrowClass=i),e=C.colorScale(d[C.column()]),g=_.find(s.colorRange,{color:e}))switch(g.name){case"most-free":s.tableData.mostFree.push(d);break;case"2nd-quart":s.tableData.quartile2.push(d);break;case"3rd-quart":s.tableData.quartile3.push(d);break;case"least-free":s.tableData.leastFree.push(d)}}function m(){w=$(".main-panel").width(),v=$(".main-panel").height(),C.path.projection().translate([w/2,v/2+150]).scale([w/5]).precision(.1),C.svg.attr("width",w).attr("height",v),C.svg.select("rect").attr("width",w).attr("height",v),C.svg.selectAll("path").attr("d",C.path),C.width(w),C.height(v)}function n(){z=window.setTimeout(function(){m(),window.clearTimeout(z)},200)}function o(a){$("#typeahead").val(_.map(C._.selectedList,function(a){return a.id.toUpperCase()})).trigger("change")}function p(){var b="world";F=[],d3.selectAll(".unit.active").each(function(a){F.push(a)}),s.selectedCountries=F,s.selectedCountries.length>0&&(b="country-info"),$('.nav-pills a[href="#'+b+'"]').tab("show"),a.$apply()}function q(){d3.select(".legend-panel").selectAll("div").data(_.reverse(s.colorRange)).enter().append("div").classed("legend-color",!0).style("background-color",function(a){return a.color})}function r(){C.data=s.yearsData[s.currentYear]||[],C.update()}var s=this;s.tableData={mostFree:[],quartile2:[],quartile3:[],leastFree:[]};var t=null;s.onSliderChange=function(b,c){t=b,s.currentYear=c,l(),r(),a.$apply()},s.slider={value:0,step:1,dataValues:[]},$(".disabled").click(function(a){return a.preventDefault(),!1});var u=null,v=$(".main-panel").height(),w=$(".main-panel").width(),x=($("#typeahead"),[],null),y=null,z=null,A=[{color:"#ee3b58",name:"least-free",value:3,text:"Least Free"},{color:"#fcab4a",name:"3rd-quart",value:2,text:"3rd Quartile"},{color:"#b8d051",name:"2nd-quart",value:1,text:"2nd Quartile"},{color:"#00bbbc",name:"most-free",value:0,text:"Most Free"}];s.colorRange=A;var B=d3.slider().min(1).max(10).step(1).orientation("vertical");d3.select("#zoom-slide").call(B),B.on("slide",function(){k(B.value())}),d3.selectAll("i[data-zoom]").on("click",j);var C,D,E,F;e(),d3.select(window).on("resize",n)}function sliderDirectiveLink(a,b,c){function d(){a.min=1,a.max=a.data.length,a.d3Slider=d3.slider().step("undefined"!=typeof a.step?a.step:1).value(a.value).animate(!1).min(a.min).max(a.max).orientation(a.orientation).snap(!1);var b=setInterval(function(){d3.select("."+a.id).selectAll("*").remove(),d3.select("."+a.id).call(a.d3Slider),$("."+a.id+" a.d3-slider-handle").append(k),k.html(a.data[a.value-1]),a.safeApply(),window.clearInterval(b),e()},50);a.d3Slider.on("slide",function(){e()}),a.d3Slider.on("slideend",function(){e()})}function e(){var b=a.d3Slider.value()-1,c=a.data[b];k.html(c),a.onValueChange({dataValue:b,value:c}),a.safeApply()}function f(){a.pauseState?g():h()}function g(){a.pauseState=!1,j=setInterval(function(){var b=a.d3Slider.value();if(b<a.max){i=!1;var c=b+a.step;a.d3Slider.value(c>a.max?a.max:c),e()}else i?(b=a.min,a.d3Slider.value(a.min)):(i=!0,h()),e(),a.safeApply()},750)}function h(){a.pauseState=!0,window.clearInterval(j),a.safeApply()}a.id="slider-"+(new Date).getTime(),a.pauseState=!0;var i=!0,j=null,k=$('<div class="slider-popover popover-single-value"></div>');a.$watch(function(){return a.data},function(a,b){d()}),a.playPause=f,d(),a.safeApply=function(a){var b=this.$root.$$phase;"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$apply(a)}}function fraserDataset(a,b){function c(){e.tableData=_.map(e.yearsData[e.currentYear],function(a){return a.year=e.currentYear,a.category=i(a.summary_index),a.trStyle={color:h(a.summary_index)},a.Area1[0].style={color:h(parseFloat(a.Area1[0].value))},a.Area2[0].style={color:h(parseFloat(a.Area2[0].value))},a.Area3[0].style={color:h(parseFloat(a.Area3[0].value))},a.Area4[0].style={color:h(parseFloat(a.Area4[0].value))},a.Area5[0].style={color:h(parseFloat(a.Area5[0].value))},a}),e.tableData.sort(function(a,b){return b.summary_index-a.summary_index}),e.tableData.forEach(function(a,b){a.ranking=b+1}),e.filterChanged()}function d(){var c=$(".chosen-select");c.html(""),a.getItems().then(function(a){function d(a,b){var c=a.toUpperCase().indexOf(b.toUpperCase()),d=$("<span></span>");if(0>c)return d.text(a);d.text(a.substring(0,c));var e=$('<span class="select2-rendered__match"></span>');return e.text(a.substring(c,c+b.length)),d.append(e),d.append(a.substring(c+b.length)),d}var f=(_.forEach(a,function(a){c.append($("<option>",a))}),{});g=c.select2({width:"100%",dropdownCssClass:"map-typeahed--dropdown",templateResult:function(a){if(a.loading)return a.text;var b=f.term||"",c=d(a.text,b);return c},maximumSelectionLength:5}),c.on("select2:unselect",function(a){a&&a.params&&a.params.data&&a.params.data.id&&(e.filter.countries=c.val()||[],b.$apply())}),c.on("select2:select",function(a){a&&a.params&&a.params.data&&a.params.data.id&&(e.filter.countries=c.val()||[],b.$apply())}),c.on("change",function(a,d){e.filter.countries=c.val()||[],b.$apply()})})}var e=this,f=d3.keys(e.yearsData);e.slider={value:f.length,step:1,dataValues:f},e.onSliderChange=function(a,d){e.currentYear=d,c(),b.$apply()},e.filter={selected:null,limit:0,categories:[{id:1,name:"MOST FREE",cssClass:"filter-most-free",active:!0,color:"#00bbbc"},{id:2,name:"2ND QUARTILE",cssClass:"filter-2nd-quart",active:!0,color:"#b8d051"},{id:3,name:"3RD QUARTILE",cssClass:"filter-3rd-quart",active:!0,color:"#fcab4a"},{id:4,name:"LEAST FREE",cssClass:"filter-least-free",active:!0,color:"#ee3b58"}],countries:[]},e.tableCategoryFilter=function(a){if(2!=e.filter.selected)return a;var b=_.find(e.filter.categories,{id:a.category});return b.active?a:void 0},e.tableCountryFilter=function(a,b,c){return 1!=e.filter.selected?a:0==e.filter.countries.length?a:e.filter.countries.indexOf(a.iso_code)>=0?a:void 0},e.filterChanged=function(){3==e.filter.selected?e.filter.limit=10:e.filter.limit=e.tableData.length},e.filterList=[{id:0,name:"ALL"},{id:1,name:"INDIVIDUAL COUNTRY"},{id:2,name:"ECONOMIC FREEDOM QUARTILE"},{id:3,name:"TOP 10 COUNTRIES"}],e.selectFilter=function(a){e.filter.selectedText=a.name,e.filter.selected=a.id,e.filterChanged()},e.filter.selectedText=e.filterList[0].name,e.filter.selected=e.filterList[0].id,e.tableData=[];var g,h=d3.scale.quantize().domain([0,10]).range(_.map(e.filter.categories,"color").reverse()),i=d3.scale.quantize().domain([0,10]).range(_.map(e.filter.categories,"id").reverse());c(),d()}function fraserGraph(a,b){function c(){var a=g.yearsData[g.currentYear];if(g.filter.countries.length>0){g.graphData=_.filter(g.countriesList,function(a){return g.filter.countries.indexOf(a.value)>=0});var c={};g.graphData=_.map(g.graphData,function(b){return c=_.find(a,{iso_code:b.value}),b.country=b.text,b.summary_index=0,c&&(b.Area1=c.Area1,b.Area2=c.Area2,b.Area3=c.Area3,b.Area4=c.Area4,b.Area5=c.Area5,b.summary_index=c.summary_index),b})}else{var d={Area1:[{value:0}],Area2:[{value:0}],Area3:[{value:0}],Area4:[{value:0}],Area5:[{value:0}],country:"World",summary_index:0,iso_code:"WOR"},f="",h=0,i=0;a.forEach(function(a){for(var b=0;b<g.categories.length;b++)f=g.categories[b].key,h=_.get(d,f,0)+_.get(a,f,0),_.set(d,f,h)}),h=0;for(var j=0;j<g.categories.length;j++)f=g.categories[j].key,h=_.get(d,f,0)/a.length,_.set(d,f,h),i+=h;d.summary_index=i/5,g.graphData=[d]}b.safeApply(),e()}function d(){i=$("#charts").width();var a={top:20,right:20,bottom:30,left:20};i=i-a.left-a.right,j=500-a.top-a.bottom,o=d3.scale.ordinal().rangeRoundBands([0,i],.1),p=d3.scale.ordinal(),q=d3.scale.linear().range([j,0]).domain([0,10]),k=d3.svg.axis().scale(o).orient("bottom"),l=d3.svg.axis().innerTickSize(-i).outerTickSize(0).scale(q).orient("left"),m=d3.select("#charts").append("svg").attr("width",i+a.left+a.right).attr("height",j+a.top+a.bottom).attr("align","center").append("g").attr("transform","translate("+a.left+","+a.top+")"),m.append("g").attr("class","y axis").call(l).append("text").attr("transform","rotate(-90)").attr("y",5).attr("dy","1em").style("text-anchor","end");var b=d3.select(m.selectAll(".y.axis .tick")[0][0]);b.select("text").attr("visibility","hidden"),b.select("line").attr("class","first-y-axis"),n=m.append("g").attr("class","tooltip-chart").style("display","none"),n.append("rect").attr("width",40).attr("height",20).attr("fill","white").style("opacity",1),n.append("text").attr("x",15).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")}function e(){var a=_.filter(g.categories,{active:!0});g.graphData.forEach(function(b){b.categories=_.map(a,function(a){var c=+_.get(b,a.key,0).toFixed(2);return{name:a.name,value:c,label:c>.5?c:"N/A",color:a.color}})}),o.domain(g.graphData.map(function(a){return a.country}));var c=d3.min([(i-100)/5,150]);p.domain(g.categories.filter(function(a){return a.active}).map(function(a){return a.name})).rangeRoundBands([0,c]),m.select(".x.axis").remove(),m.selectAll(".country").remove(),m.append("g").attr("class","x axis").attr("transform","translate(0,"+j+")").call(k);var d=m.selectAll(".country").data(g.graphData),e=d.enter().append("g").attr("class","country").style("fill","blue").attr("transform",function(a){return"translate("+o(a.country)+",0)"}),f=e.selectAll("rect").data(function(a){return a.categories});f.enter().append("rect").attr("width",p.rangeBand()-2).attr("x",function(a){return p(a.name)+1+o.rangeBand()/2-c/2}).attr("y",function(a){return q(a.value)}).attr("height",function(a){return j-q(a.value)}).style("fill",function(a){return a.color}).on("mouseover",function(){n.style("display",null)}).on("mouseout",function(){n.style("display","none")}).on("mousemove",function(a,b){n.attr("transform","translate("+(p(a.name)+p.rangeBand())+","+(q(a.value)-40)+")"),n.select("text").text(a.label)}),f.exit().remove(),b.safeApply()}function f(){var e=$("#typeahead");a.getItems().then(function(a){function f(a,b){var c=a.toUpperCase().indexOf(b.toUpperCase()),d=$("<span></span>");if(0>c)return d.text(a);d.text(a.substring(0,c));var e=$('<span class="select2-rendered__match"></span>');return e.text(a.substring(c,c+b.length)),d.append(e),d.append(a.substring(c+b.length)),d}d(),g.countriesList=a;var h=(_.forEach(a,function(a){e.append($("<option>",a))}),{});r=e.select2({dropdownCssClass:"map-typeahed--dropdown",templateResult:function(a){if(a.loading)return a.text;var b=h.term||"",c=f(a.text,b);return c},maximumSelectionLength:5}),e.on("select2:unselect",function(a){a&&a.params&&a.params.data&&a.params.data.id&&(g.filter.countries=e.val()||[],c(),b.safeApply())}),e.on("select2:select",function(a){a&&a.params&&a.params.data&&a.params.data.id&&(g.filter.countries=e.val()||[],c(),b.safeApply())}),e.on("change",function(a,d){g.filter.countries=e.val()||[],c(),b.safeApply()})})}b.safeApply=function(a){var c=this.$root.$$phase;"$apply"==c||"$digest"==c?a&&"function"==typeof a&&a():b.$apply(a)};var g=this;g.graphSelector="bar",g.selectAllCategories=!0;var h=d3.keys(g.yearsData);g.slider={value:h.length,step:1,dataValues:h},g.onSliderChange=function(a,b){g.currentYear=b,c()},g.toggleCategory=function(a){a.active=!a.active,c()},g.toggleAllCategories=function(){g.selectAllCategories=!g.selectAllCategories,g.categories.forEach(function(a){a.active=g.selectAllCategories}),c()},g.filter={countries:[]},g.categories=[{name:"Goverment Size",active:!0,color:"#ce0932",key:"Area1[0].value"},{name:"Legal Structure & Security of Property Rigths",active:!0,color:"#dd8c2c",key:"Area2[0].value"},{name:"Access to Sound Money",active:!0,color:"#74862c",key:"Area3[0].value"},{name:"International Trade Freedom",active:!0,color:"#00a3a4",key:"Area4[0].value"},{name:"Regulation of Credit, Labor and Business",active:!0,color:"#90a738",key:"Area5[0].value"}];var i,j,k,l,m,n,o,p,q,r;f()}function dataService(a,b){return"localStorage"in window||(window.localStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]},clear:function(){return this._data={}}}),{getData:function(){var c=b.defer(),d=window.localStorage.getItem("fraser.data");return d?c.resolve(JSON.parse(d)):a.get("/fraser.json",{cache:!0}).then(function(a){200==a.status&&200==a.data.code&&a.data.data&&(window.localStorage.setItem("fraser.data",JSON.stringify(a.data.data)),c.resolve(a.data.data))},function(a){c.reject(a)}),c.promise}}}function typeAheadService(a,b){var c=[],e=[];return{setItems:function(a){c=a},getItems:function(){var e=b.defer();return c.length>0?d.resolve(c):a.get("vendors/d3-geomap/topojson/world/countries.json").then(function(a){200==a.status?(c=_.map(_.get(a,"data.objects.units.geometries"),function(a){return{value:a.id,text:a.properties.name}}),e.resolve(c)):e.reject("data not found")},function(){e.reject("data not found")}),e.promise},setSelected:function(a){e=a},getSelecetd:function(){return e}}}angular.module("generateApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(appConfig),appConfig.$inject=["$routeProvider","$locationProvider"],angular.module("generateApp").controller("MainCtrl",mainController),mainController.$inject=["yearsData","$location"],angular.module("generateApp").directive("fraserMap",function(){return{templateUrl:"views/map-page.html",restrict:"E",controller:mapDirectiveController,controllerAs:"vm",bindToController:!0,scope:{yearsData:"="},link:function(){}}}),mapDirectiveController.$inject=["$scope","$timeout","typeaheadService"],angular.module("generateApp").directive("fraserSlider",function(){return{templateUrl:"views/partials/slider.html",restrict:"E",scope:{orientation:"=",step:"=",value:"=",data:"=",showPlay:"=",onValueChange:"&"},link:sliderDirectiveLink}}),angular.module("generateApp").directive("mapCountryPanel",function(){return{templateUrl:"views/partials/map-country-panel.html",restrict:"E",scope:{country:"=",colorRange:"="},link:function(a,b,c){a.data={},a.data.summary_index=a.country.data?a.country.data.summary_index+" / 10":"N/A",a.data.name=a.country.properties.name,a.data.flagIcon="flag-"+a.country.id.toLowerCase(),a.data.color=_.get(a.country,"data.color",null);var d=_.find(a.colorRange,{color:a.data.color});a.data.labelClass="label label-nodata",a.data.labelText="no data",d&&(a.data.labelClass="label label-"+d.name,a.data.labelText=d.text),a.articles=[{head:"Size of Government",icon:"fa-area-chart",value:_.get(a.country,"data.Area1[0].value","N/A")},{head:"Legal Structure and Security of Property Rights",icon:"fa-first-order",value:_.get(a.country,"data.Area2[0].value","N/A")},{head:"Access to Sound Money",icon:"fa-archive",value:_.get(a.country,"data.Area3[0].value","N/A")},{head:"Freedom to Trade Internationally",icon:"fa-building",value:_.get(a.country,"data.Area4[0].value","N/A")},{head:"Regulation of Credit, Labor and Business",icon:"fa-beer",value:_.get(a.country,"data.Area5[0].value","N/A")}]}}}),angular.module("generateApp").directive("fraserDataset",function(){return{templateUrl:"views/dataset-page.html",controllerAs:"vm",controller:fraserDataset,restrict:"E",bindToController:!0,scope:{yearsData:"="},link:function(){}}}),fraserDataset.$inject=["typeaheadService","$scope"],angular.module("generateApp").directive("fraserGraph",function(){return{templateUrl:"views/graph-page.html",controllerAs:"vm",controller:fraserGraph,restrict:"E",bindToController:!0,scope:{yearsData:"="},link:function(){}}}),fraserGraph.$inject=["typeaheadService","$scope"],angular.module("generateApp").service("fraserData",dataService),dataService.$inject=["$http","$q"],angular.module("generateApp").service("typeaheadService",typeAheadService),typeAheadService.$inject=["$http","$q"],angular.module("generateApp").run(["$templateCache",function(a){a.put("views/dataset-page.html",'<div class="container-fluid dataset-header"> <div class="col-sm-offset-1 col-md-10 dataset-header-container"> <div class="col-md-9 dataset-header-wrapper"> <div class="dataset-title">Download Dataset</div> <div class="dataset-subtitle">Economic Freedom Rankings</div> <div class="dropdown dataset-datarange-selector"> <span class="dropdown-toggle" type="button" data-toggle="dropdown"> Select Data Range <span class="caret"></span> </span> <ul class="dropdown-menu"> <li><a>Date Range</a></li> <li><a>Specific Dates</a></li> </ul> </div> </div> <div class="col-md-3 fraser-download-container"> <div class="fraser-download-container--cell"> <div class="fraser-download-container--wrapper"> <button class="btn btn-primary fraser-download-button"> Download Entire Dataset <i class="fa fa-download fraser-download-button--icon" aria-hidden="true"></i> </button> </div> </div> </div> </div> <div class="col-sm-offset-1 col-md-10 dataset-slider-container"> <fraser-slider show-play="false" step="1" value="vm.slider.value" data="vm.slider.dataValues" orientation="\'horizontal\'" on-value-change="vm.onSliderChange(dataValue, value)"> </fraser-slider> </div> </div> <div class="container-fluid filters"> <div class="col-sm-offset-1 col-md-10 filters-wrapper"> <i class="fa fa-filter filter-icon" aria-hidden="true"></i> <span>Filter By : </span> <span class="dropdown dataset-filter-selector"> <span class="dropdown-toggle dataset-filter-button" type="button" data-toggle="dropdown"> {{vm.filter.selectedText}} <span class="caret"></span> </span> <ul class="dropdown-menu"> <li ng-repeat="filter in vm.filterList" ng-click="vm.selectFilter(filter)"> <a ng-bind="filter.name"></a> </li> </ul> </span> <span class="dataset-filter-container"> <div class="quartile-filters" ng-show="vm.filter.selected == 2"> <span ng-repeat="category in vm.filter.categories" ng-click="category.active = !category.active" class="{{category.cssClass}}" ng-class="{\'inactive\': !category.active}" ng-bind="category.name"></span> </div> <div class="typeahead-filters" ng-show="vm.filter.selected == 1"> <select data-placeholder="Find a country" multiple class="chosen-select"> <option></option> </select> </div> </span> <span class="filter-download-wrapper"> <button class="btn btn-primary fraser-download-filtered-button"> Download Filtered Dataset <i class="fa fa-download fraser-download-button--icon" aria-hidden="true"></i> </button> </span> </div> </div> <div class="dataset-panel container-fluid"> <div class="col-sm-offset-1 col-md-10 dataset-table-panel"> <table class="table dataset-table"> <thead> <tr> <th width="20">OVERALL RANK</th> <th>COUNTRY NAME</th> <th width="20">YEAR</th> <th class="text-right" width="40">OVERALL SCORE</th> <th class="text-right" width="13%">LEGAL STRUCTURE & SECURITY OF PROPERTIES RIGHTS</th> <th class="text-right" width="13%">SIZE OF GOVERMENT</th> <th class="text-right" width="13%">ACCESS TO SOUND MONEY</th> <th class="text-right" width="13%">FREEDOM TO TRADE ITER.</th> <th class="text-right" width="13%">REGAULATION OF CREDIT</th> </tr> </thead> <tbody> <tr ng-repeat="entry in vm.tableData  \n          | limitTo : vm.filter.limit \n          | filter : vm.tableCategoryFilter\n          | filter : vm.tableCountryFilter\n          track by $index"> <td ng-bind="entry.ranking" ng-style="entry.trStyle"></td> <td ng-bind="entry.country"></td> <td ng-bind="entry.year"></td> <td class="text-right" ng-bind="entry.summary_index | number: 2" ng-style="entry.trStyle"></td> <td class="text-right" ng-bind="entry.Area1[0].value | number: 2" ng-style="entry.Area1[0].style"></td> <td class="text-right" ng-bind="entry.Area2[0].value | number: 2" ng-style="entry.Area2[0].style"></td> <td class="text-right" ng-bind="entry.Area3[0].value | number: 2" ng-style="entry.Area3[0].style"></td> <td class="text-right" ng-bind="entry.Area4[0].value | number: 2" ng-style="entry.Area4[0].style"></td> <td class="text-right" ng-bind="entry.Area5[0].value | number: 2" ng-style="entry.Area5[0].style"></td> </tr> </tbody> </table> </div> </div>'),a.put("views/graph-page.html",'<div class="container-fluid charts-topbar"> <div class="col-sm-offset-2 col-md-10"> <select data-placeholder="Find a country" id="typeahead" multiple class="chosen-select"> <option></option> </select> </div> </div> <div class="charts-container container-fluid"> <div class="col-md-2 charts-selection-panel"> <div class="charts-selector"> <div class="charts-selector-text">GRAPH</div> <div ng-class="{\'active\' : vm.graphSelector == \'line\'}" ng-click="vm.graphSelector = \'line\'" class="charts-selector-buttom"> <i class="fa fa-line-chart" aria-hidden="true"></i> </div> <div ng-class="{\'active\' : vm.graphSelector == \'bar\'}" ng-click="vm.graphSelector = \'bar\'" class="charts-selector-buttom"> <i class="fa fa-bar-chart" aria-hidden="true"></i> </div> </div> </div> <div class="col-md-8"> <div id="charts"></div> <fraser-slider class="charts-timebar" show-play="false" step="1" value="vm.slider.value" data="vm.slider.dataValues" orientation="\'horizontal\'" on-value-change="vm.onSliderChange(dataValue, value)"> </fraser-slider> </div> <div class="col-md-2"> <div id="legend"> <div ng-repeat="category in vm.categories" class="pointer legend-row" ng-click="vm.toggleCategory(category)"> <span> <i class="fa fa-circle" aria-hidden="true" ng-style="{\n              color: category.active ? category.color : \'gray\'\n            }"> </i> </span> <span ng-bind="category.name" class="category-text"></span> </div> <div class="pointer" ng-click="vm.toggleAllCategories()"> <span ng-bind="vm.selectAllCategories ? \'Deselect All\' : \'Select All\'" class="category-text"></span> </div> </div> </div> </div>'),a.put("views/main.html",'<fraser-map ng-if="main.page == \'map\'" years-data="main.yearsData"> </fraser-map> <fraser-graph ng-if="main.page == \'graph\'" years-data="main.yearsData"> </fraser-graph> <fraser-dataset class="dataset-page" ng-if="main.page == \'dataset\'" years-data="main.yearsData"> </fraser-dataset>'),a.put("views/map-page.html",'<div class="container-map"> <div class="side-panel"> <ul class="nav nav-pills nav-justified"> <li class="map-tab active"><a data-toggle="tab" href="#world">World Ranking</a></li> <li class="country-info--tab disabled"><a data-toggle="tab" href="#country-info">Country Info</a></li> </ul> <div class="tab-content"> <!-- WORLD TAB --> <div id="world" class="tab-pane fade in active"> <div class="text-center"> <h5>Economic Freedom Ranking</h5> <h2 class="freedom-ranking-year" ng-bind="vm.currentYear"></h2> </div> <div class="share-block"> <div class="pull-left">Share on : </div> <div class="pull-right social-icons"> <i class="fa fa-envelope pointer" aria-hidden="true"></i> <i class="fa fa-facebook-official pointer" aria-hidden="true"></i> <i class="fa fa-twitter-square pointer" aria-hidden="true"></i> </div> <div class="clearfix"></div> </div> <table class="table country-list"> <thead> <tr> <th>#</th> <th>Country</th> <th>Score</th> </tr> </thead> <tbody> <tr class="most-free-tr" ng-if="vm.tableData.mostFree.length > 0"> <th class="first-free-th" colspan="3"> <span class="label label-most-free">Most Free</span> </th> </tr> <tr ng-if="vm.tableData.mostFree.length > 0" ng-repeat="country in vm.tableData.mostFree track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"> </tr> <tr class="second-free-tr" ng-if="vm.tableData.quartile2.length > 0"> <th class="second-free-th" colspan="3"> <span class="label label-2nd-quart">2nd Quartile</span> </th> </tr> <tr ng-if="vm.tableData.quartile2.length > 0" ng-repeat="country in vm.tableData.quartile2 track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"> </tr> <tr class="third-free-tr" ng-if="vm.tableData.quartile3.length > 0"> <th class="third-free-th" colspan="3"> <span class="label label-3rd-quart">3rd Quartile</span> </th> </tr> <tr ng-if="vm.tableData.quartile3.length > 0" ng-repeat="country in vm.tableData.quartile3 track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"></tr> <tr class="least-free-tr" ng-if="vm.tableData.leastFree.length > 0"> <th class="least-free-th" colspan="3"> <span class="label label-least-free">Least Free</span> </th> </tr> <tr ng-if="vm.tableData.leastFree.length > 0" ng-repeat="country in vm.tableData.leastFree track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"> </tr> <tr class="end-tr"> </tr> </tbody> </table> </div> <!-- END OF WORLD TAB --> <!-- COUNTRY INFO TAB --> <div id="country-info" class="tab-pane fade"> <div id="selected-countries"> <map-country-panel ng-repeat="country in vm.selectedCountries" color-range="vm.colorRange" country="country"></map-country-panel> </div> </div> <!-- END OF COUNTRY INFO TAB --> </div> </div> <div class="main-panel"> <div id="graph"> <div class="header-controls"> <select data-placeholder="Find a country" id="typeahead" multiple class="chosen-select"> <option></option> </select> </div> <div class="legend-panel"></div> </div> <div class="zoom-buttons"> <i class="fa fa-plus-square pointer" aria-hidden="true" id="zoom_in" data-zoom="+1"></i> <div id="zoom-slide"></div> <i class="fa fa-minus-square pointer" aria-hidden="true" id="zoom_out" data-zoom="-1"></i> </div> <fraser-slider show-play="true" class="footer-controls" step="vm.slider.step" value="vm.slider.value" data="vm.slider.dataValues" orientation="\'horizontal\'" on-value-change="vm.onSliderChange(dataValue, value)"></fraser-slider> </div> </div> <ng-include src="\'views/partials/map-tooltip.html\'"></ng-include> '),a.put("views/partials/map-country-panel.html",'<div class="country-info--item"> <div class="text-center"> <div> <span class="country-flag flag flag-3x" ng-class="data.flagIcon"></span> </div> <h2 class="country-name" ng-bind="data.name"></h2> <h5 class="ranking"> <span class="value" ng-bind="data.summary_index"></span> </h5> <span class="label" ng-class="data.labelClass" ng-bind="data.labelText"></span> <hr> <div class="row"> <div class="col-md-6" ng-class="{\'col-sm-offset-3\' : $last && ($index % 2 == 0)}" ng-repeat="article in articles track by $index"> <div class="article-title" ng-bind="article.head"></div> <div> <i class="fa" ng-class="article.icon" aria-hidden="true" style="font-size: 25px"></i> </div> <h5 class="article-value" ng-bind="article.value"></h5> </div> </div> </div> </div>'),a.put("views/partials/map-sidepanel-world-tab.html",'<div id="world" class="tab-pane fade in active"> <div class="text-center"> <h5>Economic Freedom Ranking</h5> <h2 class="freedom-ranking-year" ng-bind="vm.currentYear"></h2> </div> <div class="share-block"> <div class="pull-left">Share on : </div> <div class="pull-right social-icons"> <i class="fa fa-envelope pointer" aria-hidden="true"></i> <i class="fa fa-facebook-official pointer" aria-hidden="true"></i> <i class="fa fa-twitter-square pointer" aria-hidden="true"></i> </div> <div class="clearfix"></div> </div> <table class="table country-list"> <thead> <tr> <th>#</th> <th>Country</th> <th>Score</th> </tr> </thead> <tbody> <tr class="most-free-tr" ng-if="vm.tableData.mostFree.length > 0"> <th class="first-free-th" colspan="3"> <span class="label label-most-free">Most Free</span> </th> </tr> <tr ng-if="vm.tableData.mostFree.length > 0" ng-repeat="country in vm.tableData.mostFree track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"> </tr> <tr class="second-free-tr" ng-if="vm.tableData.quartile2.length > 0"> <th class="second-free-th" colspan="3"> <span class="label label-2nd-quart">2nd Quartile</span> </th> </tr> <tr ng-if="vm.tableData.quartile2.length > 0" ng-repeat="country in vm.tableData.quartile2 track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"> </tr> <tr class="third-free-tr" ng-if="vm.tableData.quartile3.length > 0"> <th class="third-free-th" colspan="3"> <span class="label label-3rd-quart">3rd Quartile</span> </th> </tr> <tr ng-if="vm.tableData.quartile3.length > 0" ng-repeat="country in vm.tableData.quartile3 track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"></tr> <tr class="least-free-tr" ng-if="vm.tableData.leastFree.length > 0"> <th class="least-free-th" colspan="3"> <span class="label label-least-free">Least Free</span> </th> </tr> <tr ng-if="vm.tableData.leastFree.length > 0" ng-repeat="country in vm.tableData.leastFree track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"> </tr> <tr class="end-tr"> </tr> </tbody> </table> </div>'),
a.put("views/partials/map-table-row.html",'<td ng-bind="country.ranking" style="color: {{country.color}}"> </td> <td ng-bind="country.country"> </td> <td style="color: {{country.color}}"> <span ng-bind="country.summary_index | number : 2"></span> <i class="ranking-difference-indicator fa" ng-class="country.arrowClass" aria-hidden="true"></i> </td>'),a.put("views/partials/map-tooltip.html",'<div class="hiddens tooltip-map"> <div class="text-center"> <div class="country-title" ng-bind="vm.tooltipCountry.name"></div> <span class="tooltip--country-flag flag flag-3x" ng-class="vm.tooltipCountry.flagClass"></span> </div> <div class="country-rank" ng-style="{color: vm.tooltipCountry.color}"> <span class="rank pull-left" ng-bind="vm.tooltipCountry.rank"></span> <span class="overall pull-right" ng-bind="vm.tooltipCountry.score | number : 2"></span> <div class="clear-both"></div> </div> </div>'),a.put("views/partials/slider.html",'<div class="fraser-slider" ng-class="{\'no-play\' : !showPlay}"> <span ng-if="showPlay"> <span class="timeline-buttom play pointer" ng-click="playPause()"> <i class="fa" ng-class="{\'fa-play\': pauseState, \'fa-pause\': !pauseState}" aria-hidden="true"></i> </span> <span class="timeline-text" ng-bind="pauseState?\'play\':\'pause\';"> </span> </span> <span class="timeline-value min" ng-bind="data[min-1]"></span> <span class="{{id}}"></span> <span class="timeline-value max" ng-bind="data[max-1]"></span> </div>')}]);