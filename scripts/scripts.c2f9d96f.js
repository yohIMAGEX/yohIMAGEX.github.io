"use strict";function mainController(a,b){var c=this;c.yearsData=a,c.page=b.search().page||"map",console.log(b.search().page)}function mapDirectiveController(a,b,c){function d(){D=d3.geomap.choropleth().geofile("vendors/d3-geomap/topojson/world/countries.json").height(u).width($("#graph").width()).projection(d3.geo.mercator).colors(_.map(B,"color")).column("summary_index").duration(!1).zoomFactor(2).domain([0,10]).unitId("iso_code").format(d3.format(",.02f")).legend(!1).onGeofileLoad(function(a){g(a),f(),p()}).onClick(function(a){a&&(n(),o()),C.value(D._.zoomBehavior.scale()),$("#typeahead").select2("close")}).postUpdate(e),y=d3.keys(r.yearsData);var a=y[y.length-1];console.log(r.yearsData),r.slider.value=y.length,r.slider.dataValues=y,d3.select("#graph").datum(r.yearsData[a]).call(D.draw,D),x=r.yearsData[a]}function e(){parseFloat(D.svg.attr("width")),parseFloat(D.svg.attr("height"));k(),o(),m(),a.$apply()}function f(){d3.selectAll(".unit").on("mouseover",function(b){t=d3.select(".tooltip-map"),z=b.data,r.tooltipCountry={name:b.properties.name,rank:z?"#"+b.data.ranking:"N/A",color:z?b.data.color:"#000",flagClass:"flag-"+b.id.toLowerCase(),score:z?parseFloat(z[D.column()],10).toFixed(2):"N/A"},t.classed("hidden",!1),a.$apply()}),d3.selectAll(".unit").on("mousemove",function(b){var c=d3.event;console.log("event",c),t.classed("hidden",!1).attr("style","left:"+(c.pageX-50)+"px; top:"+(c.pageY-(t.node().getBoundingClientRect().height+15))+"px"),a.$apply()}),d3.selectAll(".unit").on("mouseout",function(a){t.classed("hidden",!0),z=null,r.tooltipCountry=null})}function g(){var a=$("#typeahead");c.getItems().then(function(b){function c(a,b){var c=a.toUpperCase().indexOf(b.toUpperCase()),d=$("<span></span>");if(0>c)return d.text(a);d.text(a.substring(0,c));var e=$('<span class="select2-rendered__match"></span>');return e.text(a.substring(c,c+b.length)),d.append(e),d.append(a.substring(c+b.length)),d}var d=(_.forEach(b,function(b){a.append($("<option>",b))}),{});window.mapTypeahead=a.select2({dropdownParent:$(".header-controls"),dropdownCssClass:"map-typeahed--dropdown",templateResult:function(a){if(a.loading)return a.text;var b=d.term||"",e=c(a.text,b);return e},language:{searching:function(a){return d=a,"Searching…"}},maximumSelectionLength:5}),a.on("select2:unselect",function(a){a&&a.params&&a.params.data&&a.params.data.id&&h(a.params.data.id)}),a.on("select2:select",function(a){a&&a.params&&a.params.data&&a.params.data.id&&h(a.params.data.id)}),a.on("change",function(b,c){var d=a.val()||[];0==d.length&&console.log("NOTHING")})})}function h(a){var b=_.find(d3.selectAll(".unit").data(),{id:a});b&&D.clicked(b)}function i(){var a=parseInt(this.getAttribute("data-zoom")),b=(d3.event.target,1),c=1;d3.event.preventDefault(),b=D._.zoomBehavior.scale()+c*a,j(b)}function j(a){var b=[D.properties.width/2,D.properties.height/2],c=D._.zoomBehavior.scaleExtent(),d=D._.zoomBehavior.translate(),e=[],f=[],g={x:d[0],y:d[1],k:D._.zoomBehavior.scale()};return a<c[0]||a>c[1]?!1:(e=[(b[0]-g.x)/g.k,(b[1]-g.y)/g.k],g.k=a,f=[e[0]*g.k+g.x,e[1]*g.k+g.y],g.x+=b[0]-f[0],g.y+=b[1]-f[1],D._.zoomBehavior.scale(g.k),C.value(g.k),D._.zoomBehavior.translate([g.x,g.y]),void D.zoom())}function k(){r.tableData={mostFree:[],quartile2:[],quartile3:[],leastFree:[]};var a=d3.selectAll(".unit").data(),b=s-1,c=[],d=null,e=null,f=null,g=null,h=0,i="";b>=0&&(c=r.yearsData[y[b]]),a=a.filter(function(a){return a.data?!0:!1}),a.sort(function(a,b){return a.data.ranking-b.data.ranking});for(var j=0;j<a.length;j++)d=a[j].data,f=_.find(c,{iso_code:d.iso_code}),f&&(h=d[D.column()]-f[D.column()],0>h?i="fa-arrow-down":h>0&&(i="fa-arrow-up"),d.arrowClass=i),e=D.colorScale(d[D.column()]),g=_.find(B,{color:e}),g&&("most-free"==g.name?r.tableData.mostFree.push(d):"2nd-quart"==g.name?r.tableData.quartile2.push(d):"3rd-quart"==g.name?r.tableData.quartile3.push(d):"least-free"==g.name&&r.tableData.leastFree.push(d))}function l(){v=$(".main-panel").width(),u=$(".main-panel").height(),D.path.projection().translate([v/2,u/2+150]).scale([v/5]).precision(.1),D.svg.attr("width",v).attr("height",u),D.svg.select("rect").attr("width",v).attr("height",u),D.svg.selectAll("path").attr("d",D.path),D.width(v)}function m(){window.clearTimeout(A),A=window.setTimeout(function(){l()},200)}function n(a){$("#typeahead").val(_.map(D._.selectedList,function(a){return a.id.toUpperCase()})).trigger("change")}function o(){var b="world";w=[],d3.selectAll(".unit.active").each(function(a){w.push(a)}),r.selectedCountries=w,r.selectedCountries.length>0&&(b="country-info"),console.log("selectedCountries",w),a.$apply(),$('.nav-pills a[href="#'+b+'"]').tab("show")}function p(){d3.select(".legend-panel").selectAll("div").data(_.reverse(B)).enter().append("div").classed("legend-color",!0).style("background-color",function(a){return a.color})}function q(){D.data=r.yearsData[r.currentYear]||[],D.update()}var r=this;r.tableData={mostFree:[],quartile2:[],quartile3:[],leastFree:[]};var s=null;r.onSliderChange=function(b,c){s=c,r.currentYear=b,k(),q(),a.$apply()},r.slider={value:0,step:1,dataValues:[]},$(".disabled").click(function(a){return a.preventDefault(),!1});var t=null,u=$(".main-panel").height(),v=$(".main-panel").width(),w=($("#typeahead"),[]),x=null,y=null,z=null,A=null,B=[{color:"#ee3b58",name:"least-free",value:3,text:"Least Free"},{color:"#fcab4a",name:"3rd-quart",value:2,text:"3rd Quartile"},{color:"#b8d051",name:"2nd-quart",value:1,text:"2nd Quartile"},{color:"#00bbbc",name:"most-free",value:0,text:"Most Free"}];r.colorRange=B;var C=d3.slider().min(1).max(10).step(1).orientation("vertical");d3.select("#zoom-slide").call(C),C.on("slide",function(){j(C.value())}),d3.selectAll("i[data-zoom]").on("click",i);var D=null;d(),d3.select(window).on("resize",m)}function postLink(a,b,c){function d(){a.min=1,a.max=a.data.length,a.d3Slider=d3.slider().step("undefined"!=typeof a.step?a.step:1).value(a.value).animate(!1).min(a.min).max(a.max).orientation(a.orientation).snap(!1);var b=setInterval(function(){d3.select("."+a.id).selectAll("*").remove(),d3.select("."+a.id).call(a.d3Slider),$("."+a.id+" a.d3-slider-handle").append(k),k.html(a.data[a.value-1]),a.$apply(),window.clearInterval(b),e()},50);a.d3Slider.on("slide",function(){e()}),a.d3Slider.on("slideend",function(){e()})}function e(){var b=a.d3Slider.value()-1,c=a.data[b];k.html(c),a.onValueChange({dataValue:c,value:b}),a.safeApply()}function f(){a.pauseState?g():h()}function g(){a.pauseState=!1,j=setInterval(function(){var b=a.d3Slider.value();if(b<a.max){i=!1;var c=b+a.step;a.d3Slider.value(c>a.max?a.max:c),e()}else 1==i?(b=a.min,a.d3Slider.value(a.min),e(),a.safeApply()):h()},750)}function h(){a.pauseState=!0,i=!0,window.clearInterval(j),a.safeApply()}a.id="slider-"+(new Date).getTime(),a.pauseState=!0;var i=!0,j=null,k=$('<div class="slider-popover popover-single-value"></div>');a.$watch(function(){return a.data},function(a,b){d()}),a.playPause=f,d(),a.safeApply=function(a){var b=this.$root.$$phase;"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$apply(a)}}function dataService(a,b){return"localStorage"in window||(window.localStorage={_data:{},setItem:function(a,b){return this._data[a]=String(b)},getItem:function(a){return this._data.hasOwnProperty(a)?this._data[a]:void 0},removeItem:function(a){return delete this._data[a]},clear:function(){return this._data={}}}),{getData:function(){var c=b.defer(),d=window.localStorage.getItem("fraser.data");return null===d?a.get("/fraser.json",{cache:!0}).then(function(a){console.log("response",a),200==a.status&&200==a.data.code&&a.data.data&&(window.localStorage.setItem("fraser.data",JSON.stringify(a.data.data)),c.resolve(a.data.data))},function(a){console.error(a),c.reject(a)}):c.resolve(JSON.parse(d)),c.promise}}}function fraserDataset(a,b){function c(){e.tableData=_.map(e.yearsData[e.currentYear],function(a){return a.year=e.currentYear,a.category=h(a.summary_index),a.trStyle={color:g(a.summary_index)},a.Area1[0].style={color:g(parseFloat(a.Area1[0].value))},a.Area2[0].style={color:g(parseFloat(a.Area2[0].value))},a.Area3[0].style={color:g(parseFloat(a.Area3[0].value))},a.Area4[0].style={color:g(parseFloat(a.Area4[0].value))},a.Area5[0].style={color:g(parseFloat(a.Area5[0].value))},a}),e.tableData.sort(function(a,b){return b.summary_index-a.summary_index}),e.tableData.forEach(function(a,b){a.ranking=b+1}),e.filterChanged()}function d(){var c=$(".chosen-select");c.html(""),a.getItems().then(function(a){function d(a,b){var c=a.toUpperCase().indexOf(b.toUpperCase()),d=$("<span></span>");if(0>c)return d.text(a);d.text(a.substring(0,c));var e=$('<span class="select2-rendered__match"></span>');return e.text(a.substring(c,c+b.length)),d.append(e),d.append(a.substring(c+b.length)),d}var f=(_.forEach(a,function(a){c.append($("<option>",a))}),{});window.mapTypeahead=c.select2({width:"100%",dropdownCssClass:"map-typeahed--dropdown",templateResult:function(a){if(a.loading)return a.text;var b=f.term||"",c=d(a.text,b);return c},language:{searching:function(a){return f=a,"Searching…"}},maximumSelectionLength:5}),c.on("select2:unselect",function(a){a&&a.params&&a.params.data&&a.params.data.id&&(e.filter.countries=c.val()||[],b.$apply())}),c.on("select2:select",function(a){a&&a.params&&a.params.data&&a.params.data.id&&(e.filter.countries=c.val()||[],b.$apply())}),c.on("change",function(a,b){var d=c.val()||[];0==d.length&&console.log("NOTHING")})})}var e=this,f=d3.keys(e.yearsData);e.slider={value:f.length,step:1,dataValues:f},e.onSliderChange=function(a,b){console.log(a,b),e.currentYear=a,c()},e.filter={selected:null,limit:0,categories:[{id:1,name:"MOST FREE",cssClass:"filter-most-free",active:!0,color:"#00bbbc"},{id:2,name:"2ND QUARTILE",cssClass:"filter-2nd-quart",active:!0,color:"#b8d051"},{id:3,name:"3RD QUARTILE",cssClass:"filter-3rd-quart",active:!0,color:"#fcab4a"},{id:4,name:"LEAST FREE",cssClass:"filter-least-free",active:!0,color:"#ee3b58"}],countries:[]},e.tableCategoryFilter=function(a,b,c){if(2!=e.filter.selected)return a;var d=_.find(e.filter.categories,{id:a.category});return d.active?a:void 0},e.tableCountryFilter=function(a,b,c){return 1!=e.filter.selected?a:0==e.filter.countries.length?a:e.filter.countries.indexOf(a.iso_code)>=0?a:void 0},e.filterChanged=function(){3==e.filter.selected?e.filter.limit=10:e.filter.limit=e.tableData.length},e.filterList=[{id:0,name:"ALL"},{id:1,name:"INDIVIDUAL COUNTRY"},{id:2,name:"ECONOMIC FREEDOM QUARTILE"},{id:3,name:"TOP 10 COUNTRIES"}],e.filter.selected=e.filterList[0].id,e.tableData=[];var g=(_.map(e.filter.categories,"color").reverse(),d3.scale.quantize().domain([0,10]).range(_.map(e.filter.categories,"color").reverse())),h=d3.scale.quantize().domain([0,10]).range(_.map(e.filter.categories,"id").reverse());d()}function typeAheadService(a,b){var c=[],d=[];return{setItems:function(a){c=a},getItems:function(){var d=b.defer();return c.length>0?d.resolve(c):a.get("vendors/d3-geomap/topojson/world/countries.json").then(function(a){200==a.status?(c=_.map(_.get(a,"data.objects.units.geometries"),function(a){return{value:a.id,text:a.properties.name}}),d.resolve(c)):d.reject("data not found")},function(){d.reject("data not found")}),d.promise},setSelected:function(a){d=a},getSelecetd:function(){return d}}}function fraserGraph(a,b){function c(){if(g.filter.countries.length>0)g.graphData=_.filter(g.yearsData[g.currentYear],function(a){return g.filter.countries.indexOf(a.iso_code)>=0});else{var a=g.yearsData[g.currentYear],c={Area1:[{value:0}],Area2:[{value:0}],Area3:[{value:0}],Area4:[{value:0}],Area5:[{value:0}],country:"World",summary_index:0,iso_code:"WOR"};a.forEach(function(a){c.Area1[0].value+=_.get(a,"Area1[0].value",0),c.Area2[0].value+=_.get(a,"Area2[0].value",0),c.Area3[0].value+=_.get(a,"Area3[0].value",0),c.Area4[0].value+=_.get(a,"Area4[0].value",0),c.Area5[0].value+=_.get(a,"Area5[0].value",0)}),c.Area1[0].value=c.Area1[0].value/a.length,c.Area2[0].value=c.Area2[0].value/a.length,c.Area3[0].value=c.Area3[0].value/a.length,c.Area4[0].value=c.Area4[0].value/a.length,c.Area5[0].value=c.Area5[0].value/a.length,c.summary_index=c.Area1[0].value+c.Area2[0].value+c.Area3[0].value+c.Area4[0].value+c.Area5[0].value,c.summary_index=c.summary_index/5,g.graphData=[c]}b.safeApply(),e()}function d(){i=$(".main-panel").width();var a={top:20,right:20,bottom:30,left:20};i=960-a.left-a.right,j=500-a.top-a.bottom,n=d3.scale.ordinal().rangeRoundBands([0,i],.1),o=d3.scale.ordinal(),p=d3.scale.linear().range([j,0]),k=d3.svg.axis().scale(n).orient("bottom"),l=d3.svg.axis().innerTickSize(-i).outerTickSize(0).scale(p).orient("left"),m=d3.select("#charts").append("svg").attr("width",i+a.left+a.right).attr("height",j+a.top+a.bottom).attr("align","center").append("g").attr("transform","translate("+a.left+","+a.top+")"),p.domain([0,10]),m.append("g").attr("class","y axis").call(l).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end"),q=m.append("g").attr("class","tooltip-chart").style("display","none"),q.append("rect").attr("width",40).attr("height",20).attr("fill","white").style("opacity",1),q.append("text").attr("x",15).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")}function e(){var a=_.filter(g.categories,{active:!0});g.graphData.forEach(function(b){b.categories=_.map(a,function(a){var c=+_.get(b,a.key,.2).toFixed(2);return{name:a.name,value:c,label:c>.5?c:"N/A",color:a.color}})}),n.domain(g.graphData.map(function(a){return a.country})),o.domain(g.categories.map(function(a){return a.name})).rangeRoundBands([0,n.rangeBand()]),m.select(".x.axis").remove(),m.selectAll(".country").remove(),m.append("g").attr("class","x axis").attr("transform","translate(0,"+j+")").call(k);var c=m.selectAll(".country").data(g.graphData),d=c.enter().append("g").attr("class","country").attr("transform",function(a){return"translate("+n(a.country)+",0)"}),e=d.selectAll("rect").data(function(a){return a.categories});e.enter().append("rect").attr("width",o.rangeBand()-2).attr("x",function(a){return o(a.name)+1}).attr("y",function(a){return p(a.value)}).attr("height",function(a){return j-p(a.value)}).style("fill",function(a){return a.color}).on("mouseover",function(){q.style("display",null)}).on("mouseout",function(){q.style("display","none")}).on("mousemove",function(a,b){q.attr("transform","translate("+(o(a.name)+o.rangeBand())+","+(p(a.value)-40)+")"),q.select("text").text(a.label)}),e.exit().remove(),b.safeApply()}function f(){var d=$("#typeahead");d.html(""),a.getItems().then(function(a){function e(a,b){var c=a.toUpperCase().indexOf(b.toUpperCase()),d=$("<span></span>");if(0>c)return d.text(a);d.text(a.substring(0,c));var e=$('<span class="select2-rendered__match"></span>');return e.text(a.substring(c,c+b.length)),d.append(e),d.append(a.substring(c+b.length)),d}var f=(_.forEach(a,function(a){d.append($("<option>",a))}),{});window.mapTypeahead=d.select2({width:"100%",dropdownCssClass:"map-typeahed--dropdown",templateResult:function(a){if(a.loading)return a.text;var b=f.term||"",c=e(a.text,b);return c},language:{searching:function(a){return f=a,"Searching…"}},maximumSelectionLength:5}),d.on("select2:unselect",function(a){a&&a.params&&a.params.data&&a.params.data.id&&(g.filter.countries=d.val()||[],c(),b.safeApply())}),d.on("select2:select",function(a){a&&a.params&&a.params.data&&a.params.data.id&&(g.filter.countries=d.val()||[],c(),b.safeApply())}),d.on("change",function(a,b){var c=d.val()||[];0==c.length})})}b.safeApply=function(a){var c=b.$root.$$phase;"$apply"==c||"$digest"==c?a&&"function"==typeof a&&a():b.$apply(a)};var g=this;g.selectAllCategories=!0;var h=d3.keys(g.yearsData);g.slider={value:h.length,step:1,dataValues:h},g.onSliderChange=function(a,b){console.log(a,b),g.currentYear=a,c()},g.toggleCategory=function(a){a.active=!a.active,c()},g.toggleAllCategories=function(){g.selectAllCategories=!g.selectAllCategories,g.categories.forEach(function(a){a.active=g.selectAllCategories}),c()},g.filter={countries:[]},g.categories=[{name:"Goverment Size",active:!0,color:"#ce0932",key:"Area1[0].value"},{name:"Legal Structure & Security of Property Rigths",active:!0,color:"#dd8c2c",key:"Area2[0].value"},{name:"Access to Sound Money",active:!0,color:"#74862c",key:"Area3[0].value"},{name:"International Trade Freedom",active:!0,color:"#00a3a4",key:"Area4[0].value"},{name:"Regulation of Credit, Labor and Business",active:!0,color:"#90a738",key:"Area5[0].value"}],d();var i,j,k,l,m,n,o,p,q;f()}angular.module("generateApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){var b={templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main",resolve:{yearsData:["fraserData","$q",function(a,b){var c=b.defer();return a.getData().then(function(a){c.resolve(a)},function(){c.reject("data not found")}),c.promise}]}};a.when("/",b).when("/:catchAll*",b)}]),angular.module("generateApp").controller("MainCtrl",mainController),mainController.$inject=["yearsData","$location"],angular.module("generateApp").directive("fraserMap",function(){return{templateUrl:"views/map-page.html",restrict:"E",controller:mapDirectiveController,controllerAs:"vm",bindToController:!0,scope:{yearsData:"="},link:function(a,b,c,d){}}}),mapDirectiveController.$inject=["$scope","$timeout","typeaheadService"],angular.module("generateApp").directive("fraserSlider",function(){return{templateUrl:"views/partials/slider.html",restrict:"E",scope:{orientation:"=",step:"=",value:"=",data:"=",showPlay:"=",onValueChange:"&"},link:postLink}}),angular.module("generateApp").service("fraserData",dataService),dataService.$inject=["$http","$q"],angular.module("generateApp").directive("fraserDataset",function(){return{templateUrl:"views/dataset-page.html",controllerAs:"vm",controller:fraserDataset,restrict:"E",bindToController:!0,scope:{yearsData:"="},link:function(a,b,c){}}}),fraserDataset.$inject=["typeaheadService","$scope"],angular.module("generateApp").directive("mapCountryPanel",function(){return{templateUrl:"views/partials/map-country-panel.html",restrict:"E",scope:{country:"=",colorRange:"="},link:function(a,b,c){console.log("scope.country",a.country),a.data={},a.data.summary_index=a.country.data&&a.country.data.summary_index?a.country.data.summary_index+"/10":"N/A",a.data.name=a.country.country,a.data.flagIcon="flag-"+a.country.id.toLowerCase(),a.data.color=_.get(a.country,"data.color",null),console.log("scope.data.color",a.data.color);var d=_.find(a.colorRange,{color:a.data.color});console.log("scale",d,a.colorRange),a.data.labelClass=d?"label label-"+d.name:"label label-nodata",a.data.labelText=d?d.text:"no data",a.articles=[{head:"Size of Government",icon:"fa-area-chart",value:_.get(a.country.data,"Area 1[0].value","N/A")},{head:"Legal Structure and Security of Property Rights",icon:"fa-first-order",value:_.get(a.country.data,"Area 2[0].value","N/A")},{head:"Access to Sound Money",icon:"fa-archive",value:_.get(a.country.data,"Area 3[0].value","N/A")},{head:"Freedom to Trade Internationally",icon:"fa-building",value:_.get(a.country.data,"Area 4[0].value","N/A")},{head:"Regulation of Credit, Labor and Business",icon:"fa-beer",value:_.get(a.country.data,"Area 5[0].value","N/A")}]}}}),angular.module("generateApp").service("typeaheadService",typeAheadService),typeAheadService.$inject=["$http","$q"],angular.module("generateApp").filter("countryCodeFilter",function(){return function(a,b){console.log("HAHAHAHHAHA",b);var c=[];return a.forEach(function(a){b.indexOf(a.iso_code)&&c.push(a)}),c}}),angular.module("generateApp").directive("fraserGraph",function(){return{templateUrl:"views/graph-page.html",controllerAs:"vm",controller:fraserGraph,restrict:"E",bindToController:!0,scope:{yearsData:"="},link:function(a,b,c){}}}),fraserGraph.$inject=["typeaheadService","$scope"],angular.module("generateApp").run(["$templateCache",function(a){a.put("views/dataset-page.html",'<div class="container-fluid"> <div> <div class="col-md-9"> <h1>Download Dataset</h1> <h3>Economic Freedom Rankings</h3> </div> <div class="col-md-3"> <button class="btn btn-primary">Download Dataset</button> </div> </div> <div> </div> </div> <fraser-slider show-play="false" step="1" value="vm.slider.value" data="vm.slider.dataValues" orientation="\'horizontal\'" on-value-change="vm.onSliderChange(dataValue, value)"> </fraser-slider> <div class="filters"> <i class="fa fa-filter" aria-hidden="true"></i> <span>Filter By : </span> <select ng-model="vm.filter.selected" ng-change="vm.filterChanged()" ng-options="filter.id as filter.name for filter in vm.filterList "> </select> <div class="quartile-filters" ng-show="vm.filter.selected == 2"> <span ng-repeat="category in vm.filter.categories" ng-click="category.active = !category.active" class="{{category.cssClass}}" ng-class="{\'inactive\': !category.active}" ng-bind="category.name"></span> </div> <div class="typeahead-filters" ng-show="vm.filter.selected == 1"> <select data-placeholder="Find a country" multiple class="chosen-select"> <option></option> </select> </div> </div> <div class="dataset-panel"> <table class="table table-striped"> <thead> <tr> <th width="20">OVERALL RANK</th> <th>COUNTRY NAME</th> <th width="20">YEAR</th> <th class="text-right" width="40">OVERALL SCORE</th> <th class="text-right" width="13%">LEGAL STRUCTURE & SECURITY OF PROPERTIES RIGHTS</th> <th class="text-right" width="13%">SIZE OF GOVERMENT</th> <th class="text-right" width="13%">ACCESS TO SOUND MONEY</th> <th class="text-right" width="13%">FREEDOM TO TRADE ITER.</th> <th class="text-right" width="13%">REGAULATION OF CREDIT</th> </tr> </thead> <tbody> <tr ng-repeat="entry in vm.tableData  \n        | limitTo : vm.filter.limit \n        | filter : vm.tableCategoryFilter\n        | filter : vm.tableCountryFilter\n        track by $index"> <td ng-bind="entry.ranking" ng-style="entry.trStyle"></td> <td ng-bind="entry.country"></td> <td ng-bind="entry.year"></td> <td class="text-right" ng-bind="entry.summary_index | number: 2" ng-style="entry.trStyle"></td> <td class="text-right" ng-bind="entry.Area1[0].value | number: 2" ng-style="entry.Area1[0].style"></td> <td class="text-right" ng-bind="entry.Area2[0].value | number: 2" ng-style="entry.Area2[0].style"></td> <td class="text-right" ng-bind="entry.Area3[0].value | number: 2" ng-style="entry.Area3[0].style"></td> <td class="text-right" ng-bind="entry.Area4[0].value | number: 2" ng-style="entry.Area4[0].style"></td> <td class="text-right" ng-bind="entry.Area5[0].value | number: 2" ng-style="entry.Area5[0].style"></td> </tr> </tbody> </table> </div>'),a.put("views/graph-page.html",'<div class="container-fluid"> <select data-placeholder="Find a country" id="typeahead" multiple class="chosen-select"> <option></option> </select> </div> <div class="container-fluid"> <div id="charts"> </div> <div id="legend"> <div ng-repeat="category in vm.categories" class="pointer" ng-click="vm.toggleCategory(category)"> <span> <i class="fa fa-circle" aria-hidden="true" ng-style="{\n            color: category.active ? category.color : \'gray\'\n          }"> </i> </span> <span ng-bind="category.name" class="category-text"></span> </div> <div class="pointer" ng-click="vm.toggleAllCategories()"> <span ng-bind="vm.selectAllCategories ? \'Deselect All\' : \'Select All\'" class="category-text"></span> </div> </div> </div> <fraser-slider class="footer-controls" show-play="false" step="1" value="vm.slider.value" data="vm.slider.dataValues" orientation="\'horizontal\'" on-value-change="vm.onSliderChange(dataValue, value)"> </fraser-slider>'),a.put("views/main.html",'<fraser-map ng-if="main.page == \'map\'" years-data="main.yearsData"> </fraser-map> <fraser-graph ng-if="main.page == \'graph\'" years-data="main.yearsData"> </fraser-graph> <fraser-dataset ng-if="main.page == \'dataset\'" years-data="main.yearsData"> </fraser-dataset>'),a.put("views/map-page.html",'<div class="side-panel"> <ul class="nav nav-pills nav-justified"> <li class="map-tab active"><a data-toggle="tab" href="#world">World Ranking</a></li> <li class="country-info--tab disabled"><a data-toggle="tab" href="#country-info">Country Info</a></li> </ul> <div class="tab-content"> <!-- WORLD TAB --> <div id="world" class="tab-pane fade in active"> <div class="text-center"> <h5>Economic Freedom Ranking</h5> <h2 class="freedom-ranking-year" ng-bind="vm.currentYear"></h2> </div> <div class="share-block"> <div class="pull-left">Share on : </div> <div class="pull-right social-icons"> <i class="fa fa-envelope pointer" aria-hidden="true"></i> <i class="fa fa-facebook-official pointer" aria-hidden="true"></i> <i class="fa fa-twitter-square pointer" aria-hidden="true"></i> </div> <div class="clearfix"></div> </div> <table class="table country-list"> <thead> <tr> <th>#</th> <th>Country</th> <th>Score</th> </tr> </thead> <tbody> <tr class="most-free-tr" ng-if="vm.tableData.mostFree.length > 0"> <th class="first-free-th" colspan="3"> <span class="label label-most-free">Most Free</span> </th> </tr> <tr ng-if="vm.tableData.mostFree.length > 0" ng-repeat="country in vm.tableData.mostFree track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"> </tr> <tr class="second-free-tr" ng-if="vm.tableData.quartile2.length > 0"> <th class="second-free-th" colspan="3"> <span class="label label-2nd-quart">2nd Quartile</span> </th> </tr> <tr ng-if="vm.tableData.quartile2.length > 0" ng-repeat="country in vm.tableData.quartile2 track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"> </tr> <tr class="third-free-tr" ng-if="vm.tableData.quartile3.length > 0"> <th class="third-free-th" colspan="3"> <span class="label label-3rd-quart">3rd Quartile</span> </th> </tr> <tr ng-if="vm.tableData.quartile3.length > 0" ng-repeat="country in vm.tableData.quartile3 track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"></tr> <tr class="least-free-tr" ng-if="vm.tableData.leastFree.length > 0"> <th class="least-free-th" colspan="3"> <span class="label label-least-free">Least Free</span> </th> </tr> <tr ng-if="vm.tableData.leastFree.length > 0" ng-repeat="country in vm.tableData.leastFree track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"> </tr> <tr class="end-tr"> </tr> </tbody> </table> </div> <!-- END OF WORLD TAB --> <!-- COUNTRY INFO TAB --> <div id="country-info" class="tab-pane fade"> <div id="selected-countries"> <map-country-panel ng-repeat="country in vm.selectedCountries" color-range="vm.colorRange" country="country"></map-country-panel> </div> </div> <!-- END OF COUNTRY INFO TAB --> </div> </div> <div class="main-panel"> <div id="graph"> <div class="header-controls"> <select data-placeholder="Find a country" id="typeahead" multiple class="chosen-select"> <option></option> </select> </div> <div class="legend-panel"></div> </div> <div class="zoom-buttons"> <i class="fa fa-plus-square pointer" aria-hidden="true" id="zoom_in" data-zoom="+1"></i> <div id="zoom-slide"></div> <i class="fa fa-minus-square pointer" aria-hidden="true" id="zoom_out" data-zoom="-1"></i> </div> <fraser-slider show-play="true" class="footer-controls" step="vm.slider.step" value="vm.slider.value" data="vm.slider.dataValues" orientation="\'horizontal\'" on-value-change="vm.onSliderChange(dataValue, value)"></fraser-slider> </div>  <ng-include src="\'views/partials/map-tooltip.html\'"></ng-include>'),a.put("views/partials/map-country-panel.html",'<div class="country-info--item"> <div class="text-center"> <div> <span class="country-flag flag flag-3x" ng-class="data.flagIcon"></span> </div> <h2 class="country-name" ng-bind="data.name"></h2> <h5 class="ranking"> <span class="value" ng-bind="data.summary_index"></span> </h5> <span class="label" ng-class="data.labelClass" ng-bind="data.labelText"></span> <hr> <div class="row"> <div class="col-md-6" ng-class="{\'col-sm-offset-3\' : $last && ($index % 2 == 0)}" ng-repeat="article in articles track by $index"> <div class="article-title" ng-bind="article.head"></div> <div> <i class="fa" ng-class="article.icon" aria-hidden="true" style="font-size: 25px"></i> </div> <h5 class="article-value" ng-bind="article.value | number : 2"></h5> </div> </div> </div> </div>'),a.put("views/partials/map-sidepanel-world-tab.html",'<div id="world" class="tab-pane fade in active"> <div class="text-center"> <h5>Economic Freedom Ranking</h5> <h2 class="freedom-ranking-year" ng-bind="vm.currentYear"></h2> </div> <div class="share-block"> <div class="pull-left">Share on : </div> <div class="pull-right social-icons"> <i class="fa fa-envelope pointer" aria-hidden="true"></i> <i class="fa fa-facebook-official pointer" aria-hidden="true"></i> <i class="fa fa-twitter-square pointer" aria-hidden="true"></i> </div> <div class="clearfix"></div> </div> <table class="table country-list"> <thead> <tr> <th>#</th> <th>Country</th> <th>Score</th> </tr> </thead> <tbody> <tr class="most-free-tr" ng-if="vm.tableData.mostFree.length > 0"> <th class="first-free-th" colspan="3"> <span class="label label-most-free">Most Free</span> </th> </tr> <tr ng-if="vm.tableData.mostFree.length > 0" ng-repeat="country in vm.tableData.mostFree track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"> </tr> <tr class="second-free-tr" ng-if="vm.tableData.quartile2.length > 0"> <th class="second-free-th" colspan="3"> <span class="label label-2nd-quart">2nd Quartile</span> </th> </tr> <tr ng-if="vm.tableData.quartile2.length > 0" ng-repeat="country in vm.tableData.quartile2 track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"> </tr> <tr class="third-free-tr" ng-if="vm.tableData.quartile3.length > 0"> <th class="third-free-th" colspan="3"> <span class="label label-3rd-quart">3rd Quartile</span> </th> </tr> <tr ng-if="vm.tableData.quartile3.length > 0" ng-repeat="country in vm.tableData.quartile3 track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"></tr> <tr class="least-free-tr" ng-if="vm.tableData.leastFree.length > 0"> <th class="least-free-th" colspan="3"> <span class="label label-least-free">Least Free</span> </th> </tr> <tr ng-if="vm.tableData.leastFree.length > 0" ng-repeat="country in vm.tableData.leastFree track by country.iso_code" ng-include="\'views/partials/map-table-row.html\'"> </tr> <tr class="end-tr"> </tr> </tbody> </table> </div>'),a.put("views/partials/map-table-row.html",'<td ng-bind="country.ranking" style="color: {{country.color}}"> </td> <td ng-bind="country.country"> </td> <td style="color: {{country.color}}"> <span ng-bind="country.summary_index | number : 2"></span> <i class="ranking-difference-indicator fa" ng-class="country.arrowClass" aria-hidden="true"></i> </td>'),a.put("views/partials/map-tooltip.html",'<div class="hiddens tooltip-map"> <div class="text-center"> <div class="country-title" ng-bind="vm.tooltipCountry.name"></div> <span class="tooltip--country-flag flag flag-3x" ng-class="vm.tooltipCountry.flagClass"></span> </div> <div class="country-rank" ng-style="{color: vm.tooltipCountry.color}"> <span class="rank pull-left" ng-bind="vm.tooltipCountry.rank"></span> <span class="overall pull-right" ng-bind="vm.tooltipCountry.score | number : 2"></span> <div class="clear-both"></div> </div> </div>'),a.put("views/partials/slider.html",'<div class="fraser-slider" ng-class="{\'no-play\' : !showPlay}"> <span ng-if="showPlay"> <span class="timeline-buttom play pointer" ng-click="playPause()"> <i class="fa" ng-class="{\'fa-play\': pauseState, \'fa-pause\': !pauseState}" aria-hidden="true"></i> </span> <span class="timeline-text" ng-bind="pauseState?\'play\':\'pause\';"> </span> </span> <span class="timeline-value min" ng-bind="data[min-1]"></span> <span class="{{id}}"></span> <span class="timeline-value max" ng-bind="data[max-1]"></span> </div>')}]);